{"ast":null,"code":"// Generated by CoffeeScript 1.8.0\nvar WebGLHeatmap = require('./webgl-heatmap');\n\nvar HeatmapTexture = require('./heatmap-texture');\n\nvar fs = require('fs');\n\nvar path = require('path');\n/* eslint-disable max-len */\n\n\nvar vertexShaderBlit = fs.readFileSync(path.join(__dirname, './vertex-shader-blit.glsl'), 'utf-8');\nvar fragmentShaderBlit = fs.readFileSync(path.join(__dirname, './fragment-shader-blit.glsl'), 'utf-8');\n/* eslint-enable max-len */\n\nvar __indexOf = [].indexOf || function (item) {\n  for (var i = 0, l = this.length; i < l; i++) {\n    if (i in this && this[i] === item) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nfunction nukeVendorPrefix() {\n  var getExtension, getSupportedExtensions, vendorRe, vendors;\n\n  if (window.WebGLRenderingContext != null) {\n    vendors = ['WEBKIT', 'MOZ', 'MS', 'O'];\n    vendorRe = /^WEBKIT_(.*)|MOZ_(.*)|MS_(.*)|O_(.*)/;\n    getExtension = WebGLRenderingContext.prototype.getExtension;\n\n    WebGLRenderingContext.prototype.getExtension = function (name) {\n      var extobj, match, vendor, _i, _len;\n\n      match = name.match(vendorRe);\n\n      if (match !== null) {\n        name = match[1];\n      }\n\n      extobj = getExtension.call(this, name);\n\n      if (extobj === null) {\n        for (_i = 0, _len = vendors.length; _i < _len; _i++) {\n          vendor = vendors[_i];\n          extobj = getExtension.call(this, vendor + '_' + name);\n\n          if (extobj !== null) {\n            return extobj;\n          }\n        }\n\n        return null;\n      } else {\n        return extobj;\n      }\n    };\n\n    getSupportedExtensions = WebGLRenderingContext.prototype.getSupportedExtensions;\n    return WebGLRenderingContext.prototype.getSupportedExtensions = function () {\n      var extension, match, result, supported, _i, _len;\n\n      supported = getSupportedExtensions.call(this);\n      result = [];\n\n      for (_i = 0, _len = supported.length; _i < _len; _i++) {\n        extension = supported[_i];\n        match = extension.match(vendorRe);\n\n        if (match !== null) {\n          extension = match[1];\n        }\n\n        if (__indexOf.call(result, extension) < 0) {\n          result.push(extension);\n        }\n      }\n\n      return result;\n    };\n  }\n}\n\n;\n\nfunction textureFloatShims() {\n  var checkColorBuffer, checkFloatLinear, checkSupport, checkTexture, createSourceCanvas, getExtension, getSupportedExtensions, name, shimExtensions, shimLookup, unshimExtensions, unshimLookup, _i, _len;\n\n  createSourceCanvas = function () {\n    var canvas, ctx, imageData;\n    canvas = document.createElement('canvas');\n    canvas.width = 2;\n    canvas.height = 2;\n    ctx = canvas.getContext('2d');\n    imageData = ctx.getImageData(0, 0, 2, 2);\n    imageData.data.set(new Uint8ClampedArray([0, 0, 0, 0, 255, 255, 255, 255, 0, 0, 0, 0, 255, 255, 255, 255]));\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  };\n\n  createSourceCanvas();\n\n  checkFloatLinear = function (gl, sourceType) {\n    var buffer, cleanup, fragmentShader, framebuffer, positionLoc, program, readBuffer, result, source, sourceCanvas, sourceLoc, target, vertexShader, vertices;\n    program = gl.createProgram();\n    vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.attachShader(program, vertexShader);\n    gl.shaderSource(vertexShader, 'attribute vec2 position;\\nvoid main(){\\n    gl_Position = vec4(position, 0.0, 1.0);\\n}');\n    gl.compileShader(vertexShader);\n\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      throw gl.getShaderInfoLog(vertexShader);\n    }\n\n    fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.attachShader(program, fragmentShader);\n    gl.shaderSource(fragmentShader, 'uniform sampler2D source;\\nvoid main(){\\n    gl_FragColor = texture2D(source, vec2(1.0, 1.0));\\n}');\n    gl.compileShader(fragmentShader);\n\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      throw gl.getShaderInfoLog(fragmentShader);\n    }\n\n    gl.linkProgram(program);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      throw gl.getProgramInfoLog(program);\n    }\n\n    gl.useProgram(program);\n\n    cleanup = function () {\n      gl.deleteShader(fragmentShader);\n      gl.deleteShader(vertexShader);\n      gl.deleteProgram(program);\n      gl.deleteBuffer(buffer);\n      gl.deleteTexture(source);\n      gl.deleteTexture(target);\n      gl.deleteFramebuffer(framebuffer);\n      gl.bindBuffer(gl.ARRAY_BUFFER, null);\n      gl.useProgram(null);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n      return gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    };\n\n    target = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, target);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, target, 0);\n    sourceCanvas = createSourceCanvas();\n    source = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, source);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, sourceType, sourceCanvas);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    vertices = new Float32Array([1, 1, -1, 1, -1, -1, 1, 1, -1, -1, 1, -1]);\n    buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n    positionLoc = gl.getAttribLocation(program, 'position');\n    sourceLoc = gl.getUniformLocation(program, 'source');\n    gl.enableVertexAttribArray(positionLoc);\n    gl.vertexAttribPointer(positionLoc, 2, gl.FLOAT, false, 0, 0);\n    gl.uniform1i(sourceLoc, 0);\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n    readBuffer = new Uint8Array(4 * 4);\n    gl.readPixels(0, 0, 2, 2, gl.RGBA, gl.UNSIGNED_BYTE, readBuffer);\n    result = Math.abs(readBuffer[0] - 127) < 10;\n    cleanup();\n    return result;\n  };\n\n  checkTexture = function (gl, targetType) {\n    var target;\n    target = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, target);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, targetType, null);\n\n    if (gl.getError() === 0) {\n      gl.deleteTexture(target);\n      return true;\n    } else {\n      gl.deleteTexture(target);\n      return false;\n    }\n  };\n\n  checkColorBuffer = function (gl, targetType) {\n    var check, framebuffer, target;\n    target = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, target);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, targetType, null);\n    framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, target, 0);\n    check = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    gl.deleteTexture(target);\n    gl.deleteFramebuffer(framebuffer);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    if (check === gl.FRAMEBUFFER_COMPLETE) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  shimExtensions = [];\n  shimLookup = {};\n  unshimExtensions = [];\n\n  checkSupport = function () {\n    var canvas, extobj, gl, halfFloatExt, halfFloatTexturing, singleFloatExt, singleFloatTexturing;\n    canvas = document.createElement('canvas');\n    gl = null;\n\n    try {\n      gl = canvas.getContext('experimental-webgl');\n\n      if (gl === null) {\n        gl = canvas.getContext('webgl');\n      }\n    } catch (_error) {}\n\n    if (gl != null) {\n      singleFloatExt = gl.getExtension('OES_texture_float');\n\n      if (singleFloatExt === null) {\n        if (checkTexture(gl, gl.FLOAT)) {\n          singleFloatTexturing = true;\n          shimExtensions.push('OES_texture_float');\n          shimLookup.OES_texture_float = {\n            shim: true\n          };\n        } else {\n          singleFloatTexturing = false;\n          unshimExtensions.push('OES_texture_float');\n        }\n      } else {\n        if (checkTexture(gl, gl.FLOAT)) {\n          singleFloatTexturing = true;\n          shimExtensions.push('OES_texture_float');\n        } else {\n          singleFloatTexturing = false;\n          unshimExtensions.push('OES_texture_float');\n        }\n      }\n\n      if (singleFloatTexturing) {\n        extobj = gl.getExtension('WEBGL_color_buffer_float');\n\n        if (extobj === null) {\n          if (checkColorBuffer(gl, gl.FLOAT)) {\n            shimExtensions.push('WEBGL_color_buffer_float');\n            shimLookup.WEBGL_color_buffer_float = {\n              shim: true,\n              RGBA32F_EXT: 0x8814,\n              RGB32F_EXT: 0x8815,\n              FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT: 0x8211,\n              UNSIGNED_NORMALIZED_EXT: 0x8C17\n            };\n          } else {\n            unshimExtensions.push('WEBGL_color_buffer_float');\n          }\n        } else {\n          if (checkColorBuffer(gl, gl.FLOAT)) {\n            shimExtensions.push('WEBGL_color_buffer_float');\n          } else {\n            unshimExtensions.push('WEBGL_color_buffer_float');\n          }\n        }\n\n        extobj = gl.getExtension('OES_texture_float_linear');\n\n        if (extobj === null) {\n          if (checkFloatLinear(gl, gl.FLOAT)) {\n            shimExtensions.push('OES_texture_float_linear');\n            shimLookup.OES_texture_float_linear = {\n              shim: true\n            };\n          } else {\n            unshimExtensions.push('OES_texture_float_linear');\n          }\n        } else {\n          if (checkFloatLinear(gl, gl.FLOAT)) {\n            shimExtensions.push('OES_texture_float_linear');\n          } else {\n            unshimExtensions.push('OES_texture_float_linear');\n          }\n        }\n      }\n\n      halfFloatExt = gl.getExtension('OES_texture_half_float');\n\n      if (halfFloatExt === null) {\n        if (checkTexture(gl, 0x8D61)) {\n          halfFloatTexturing = true;\n          shimExtensions.push('OES_texture_half_float');\n          halfFloatExt = shimLookup.OES_texture_half_float = {\n            HALF_FLOAT_OES: 0x8D61,\n            shim: true\n          };\n        } else {\n          halfFloatTexturing = false;\n          unshimExtensions.push('OES_texture_half_float');\n        }\n      } else {\n        if (checkTexture(gl, halfFloatExt.HALF_FLOAT_OES)) {\n          halfFloatTexturing = true;\n          shimExtensions.push('OES_texture_half_float');\n        } else {\n          halfFloatTexturing = false;\n          unshimExtensions.push('OES_texture_half_float');\n        }\n      }\n\n      if (halfFloatTexturing) {\n        extobj = gl.getExtension('EXT_color_buffer_half_float');\n\n        if (extobj === null) {\n          if (checkColorBuffer(gl, halfFloatExt.HALF_FLOAT_OES)) {\n            shimExtensions.push('EXT_color_buffer_half_float');\n            shimLookup.EXT_color_buffer_half_float = {\n              shim: true,\n              RGBA16F_EXT: 0x881A,\n              RGB16F_EXT: 0x881B,\n              FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT: 0x8211,\n              UNSIGNED_NORMALIZED_EXT: 0x8C17\n            };\n          } else {\n            unshimExtensions.push('EXT_color_buffer_half_float');\n          }\n        } else {\n          if (checkColorBuffer(gl, halfFloatExt.HALF_FLOAT_OES)) {\n            shimExtensions.push('EXT_color_buffer_half_float');\n          } else {\n            unshimExtensions.push('EXT_color_buffer_half_float');\n          }\n        }\n\n        extobj = gl.getExtension('OES_texture_half_float_linear');\n\n        if (extobj === null) {\n          if (checkFloatLinear(gl, halfFloatExt.HALF_FLOAT_OES)) {\n            shimExtensions.push('OES_texture_half_float_linear');\n            return shimLookup.OES_texture_half_float_linear = {\n              shim: true\n            };\n          } else {\n            return unshimExtensions.push('OES_texture_half_float_linear');\n          }\n        } else {\n          if (checkFloatLinear(gl, halfFloatExt.HALF_FLOAT_OES)) {\n            return shimExtensions.push('OES_texture_half_float_linear');\n          } else {\n            return unshimExtensions.push('OES_texture_half_float_linear');\n          }\n        }\n      }\n    }\n  };\n\n  if (window.WebGLRenderingContext != null) {\n    checkSupport();\n    unshimLookup = {};\n\n    for (_i = 0, _len = unshimExtensions.length; _i < _len; _i++) {\n      name = unshimExtensions[_i];\n      unshimLookup[name] = true;\n    }\n\n    getExtension = WebGLRenderingContext.prototype.getExtension;\n\n    WebGLRenderingContext.prototype.getExtension = function (name) {\n      var extobj;\n      extobj = shimLookup[name];\n\n      if (extobj === void 0) {\n        if (unshimLookup[name]) {\n          return null;\n        } else {\n          return getExtension.call(this, name);\n        }\n      } else {\n        return extobj;\n      }\n    };\n\n    getSupportedExtensions = WebGLRenderingContext.prototype.getSupportedExtensions;\n\n    WebGLRenderingContext.prototype.getSupportedExtensions = function () {\n      var extension, result, supported, _j, _k, _len1, _len2;\n\n      supported = getSupportedExtensions.call(this);\n      result = [];\n\n      for (_j = 0, _len1 = supported.length; _j < _len1; _j++) {\n        extension = supported[_j];\n\n        if (unshimLookup[extension] === void 0) {\n          result.push(extension);\n        }\n      }\n\n      for (_k = 0, _len2 = shimExtensions.length; _k < _len2; _k++) {\n        extension = shimExtensions[_k];\n\n        if (__indexOf.call(result, extension) < 0) {\n          result.push(extension);\n        }\n      }\n\n      return result;\n    };\n\n    return WebGLRenderingContext.prototype.getFloatExtension = function (spec) {\n      var candidate, candidates, half, halfFramebuffer, halfLinear, halfTexture, i, importance, preference, result, single, singleFramebuffer, singleLinear, singleTexture, use, _j, _k, _l, _len1, _len2, _len3, _len4, _m, _ref, _ref1, _ref2;\n\n      if (spec.prefer == null) {\n        spec.prefer = ['half'];\n      }\n\n      if (spec.require == null) {\n        spec.require = [];\n      }\n\n      if (spec.throws == null) {\n        spec.throws = true;\n      }\n\n      singleTexture = this.getExtension('OES_texture_float');\n      halfTexture = this.getExtension('OES_texture_half_float');\n      singleFramebuffer = this.getExtension('WEBGL_color_buffer_float');\n      halfFramebuffer = this.getExtension('EXT_color_buffer_half_float');\n      singleLinear = this.getExtension('OES_texture_float_linear');\n      halfLinear = this.getExtension('OES_texture_half_float_linear');\n      single = {\n        texture: singleTexture !== null,\n        filterable: singleLinear !== null,\n        renderable: singleFramebuffer !== null,\n        score: 0,\n        precision: 'single',\n        half: false,\n        single: true,\n        type: this.FLOAT\n      };\n      half = {\n        texture: halfTexture !== null,\n        filterable: halfLinear !== null,\n        renderable: halfFramebuffer !== null,\n        score: 0,\n        precision: 'half',\n        half: true,\n        single: false,\n        type: (_ref = halfTexture != null ? halfTexture.HALF_FLOAT_OES : void 0) != null ? _ref : null\n      };\n      candidates = [];\n\n      if (single.texture) {\n        candidates.push(single);\n      }\n\n      if (half.texture) {\n        candidates.push(half);\n      }\n\n      result = [];\n\n      for (_j = 0, _len1 = candidates.length; _j < _len1; _j++) {\n        candidate = candidates[_j];\n        use = true;\n        _ref1 = spec.require;\n\n        for (_k = 0, _len2 = _ref1.length; _k < _len2; _k++) {\n          name = _ref1[_k];\n\n          if (candidate[name] === false) {\n            use = false;\n          }\n        }\n\n        if (use) {\n          result.push(candidate);\n        }\n      }\n\n      for (_l = 0, _len3 = result.length; _l < _len3; _l++) {\n        candidate = result[_l];\n        _ref2 = spec.prefer;\n\n        for (i = _m = 0, _len4 = _ref2.length; _m < _len4; i = ++_m) {\n          preference = _ref2[i];\n          importance = Math.pow(2, spec.prefer.length - i - 1);\n\n          if (candidate[preference]) {\n            candidate.score += importance;\n          }\n        }\n      }\n\n      result.sort(function sort(a, b) {\n        if (a.score === b.score) {\n          return 0;\n        } else if (a.score < b.score) {\n          return 1;\n        } else if (a.score > b.score) {\n          return -1;\n        }\n      });\n\n      if (result.length === 0) {\n        if (spec.throws) {\n          throw 'No floating point texture support that is ' + spec.require.join(', ');\n        } else {\n          return null;\n        }\n      } else {\n        result = result[0];\n        return {\n          filterable: result.filterable,\n          renderable: result.renderable,\n          type: result.type,\n          precision: result.precision\n        };\n      }\n    };\n  }\n}\n\nnukeVendorPrefix();\ntextureFloatShims();\nmodule.exports = WebGLHeatmap;","map":{"version":3,"sources":["C:/Users/HorchiAbla/Desktop/dashboard1/node_modules/webgl-heatmap/index.js"],"names":["WebGLHeatmap","require","HeatmapTexture","fs","path","vertexShaderBlit","readFileSync","join","__dirname","fragmentShaderBlit","__indexOf","indexOf","item","i","l","length","nukeVendorPrefix","getExtension","getSupportedExtensions","vendorRe","vendors","window","WebGLRenderingContext","prototype","name","extobj","match","vendor","_i","_len","call","extension","result","supported","push","textureFloatShims","checkColorBuffer","checkFloatLinear","checkSupport","checkTexture","createSourceCanvas","shimExtensions","shimLookup","unshimExtensions","unshimLookup","canvas","ctx","imageData","document","createElement","width","height","getContext","getImageData","data","set","Uint8ClampedArray","putImageData","gl","sourceType","buffer","cleanup","fragmentShader","framebuffer","positionLoc","program","readBuffer","source","sourceCanvas","sourceLoc","target","vertexShader","vertices","createProgram","createShader","VERTEX_SHADER","attachShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","FRAGMENT_SHADER","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","deleteShader","deleteProgram","deleteBuffer","deleteTexture","deleteFramebuffer","bindBuffer","ARRAY_BUFFER","bindTexture","TEXTURE_2D","bindFramebuffer","FRAMEBUFFER","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","createFramebuffer","framebufferTexture2D","COLOR_ATTACHMENT0","Float32Array","createBuffer","bufferData","STATIC_DRAW","getAttribLocation","getUniformLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform1i","drawArrays","TRIANGLES","Uint8Array","readPixels","Math","abs","targetType","getError","check","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","halfFloatExt","halfFloatTexturing","singleFloatExt","singleFloatTexturing","_error","OES_texture_float","shim","WEBGL_color_buffer_float","RGBA32F_EXT","RGB32F_EXT","FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT","UNSIGNED_NORMALIZED_EXT","OES_texture_float_linear","OES_texture_half_float","HALF_FLOAT_OES","EXT_color_buffer_half_float","RGBA16F_EXT","RGB16F_EXT","OES_texture_half_float_linear","_j","_k","_len1","_len2","getFloatExtension","spec","candidate","candidates","half","halfFramebuffer","halfLinear","halfTexture","importance","preference","single","singleFramebuffer","singleLinear","singleTexture","use","_l","_len3","_len4","_m","_ref","_ref1","_ref2","prefer","throws","texture","filterable","renderable","score","precision","type","pow","sort","a","b","module","exports"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.8.0\n\nvar WebGLHeatmap = require('./webgl-heatmap');\nvar HeatmapTexture = require('./heatmap-texture');\nvar fs = require('fs');\nvar path = require('path');\n/* eslint-disable max-len */\nvar vertexShaderBlit = fs.readFileSync(path.join(__dirname, './vertex-shader-blit.glsl'), 'utf-8');\nvar fragmentShaderBlit = fs.readFileSync(path.join(__dirname, './fragment-shader-blit.glsl'), 'utf-8');\n/* eslint-enable max-len */\n\nvar __indexOf = [].indexOf || function(item) {\n  for (var i = 0, l = this.length; i < l; i++) {\n    if (i in this && this[i] === item) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nfunction nukeVendorPrefix() {\n  var getExtension, getSupportedExtensions, vendorRe, vendors;\n  if (window.WebGLRenderingContext != null) {\n    vendors = ['WEBKIT', 'MOZ', 'MS', 'O'];\n    vendorRe = /^WEBKIT_(.*)|MOZ_(.*)|MS_(.*)|O_(.*)/;\n    getExtension = WebGLRenderingContext.prototype.getExtension;\n    WebGLRenderingContext.prototype.getExtension = function(name) {\n      var extobj, match, vendor, _i, _len;\n      match = name.match(vendorRe);\n      if (match !== null) {\n        name = match[1];\n      }\n      extobj = getExtension.call(this, name);\n      if (extobj === null) {\n        for (_i = 0, _len = vendors.length; _i < _len; _i++) {\n          vendor = vendors[_i];\n          extobj = getExtension.call(this, vendor + '_' + name);\n          if (extobj !== null) {\n            return extobj;\n          }\n        }\n        return null;\n      } else {\n        return extobj;\n      }\n    };\n    getSupportedExtensions = WebGLRenderingContext.prototype.getSupportedExtensions;\n    return WebGLRenderingContext.prototype.getSupportedExtensions = function() {\n      var extension, match, result, supported, _i, _len;\n      supported = getSupportedExtensions.call(this);\n      result = [];\n      for (_i = 0, _len = supported.length; _i < _len; _i++) {\n        extension = supported[_i];\n        match = extension.match(vendorRe);\n        if (match !== null) {\n          extension = match[1];\n        }\n        if (__indexOf.call(result, extension) < 0) {\n          result.push(extension);\n        }\n      }\n      return result;\n    };\n  }\n};\n\nfunction textureFloatShims() {\n  var checkColorBuffer, checkFloatLinear, checkSupport, checkTexture, createSourceCanvas, getExtension, getSupportedExtensions, name, shimExtensions, shimLookup, unshimExtensions, unshimLookup, _i, _len;\n  createSourceCanvas = function() {\n    var canvas, ctx, imageData;\n    canvas = document.createElement('canvas');\n    canvas.width = 2;\n    canvas.height = 2;\n    ctx = canvas.getContext('2d');\n    imageData = ctx.getImageData(0, 0, 2, 2);\n    imageData.data.set(new Uint8ClampedArray([0, 0, 0, 0, 255, 255, 255, 255, 0, 0, 0, 0, 255, 255, 255, 255]));\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  };\n  createSourceCanvas();\n  checkFloatLinear = function(gl, sourceType) {\n    var buffer, cleanup, fragmentShader, framebuffer, positionLoc, program, readBuffer, result, source, sourceCanvas, sourceLoc, target, vertexShader, vertices;\n    program = gl.createProgram();\n    vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.attachShader(program, vertexShader);\n    gl.shaderSource(vertexShader, 'attribute vec2 position;\\nvoid main(){\\n    gl_Position = vec4(position, 0.0, 1.0);\\n}');\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      throw gl.getShaderInfoLog(vertexShader);\n    }\n    fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.attachShader(program, fragmentShader);\n    gl.shaderSource(fragmentShader, 'uniform sampler2D source;\\nvoid main(){\\n    gl_FragColor = texture2D(source, vec2(1.0, 1.0));\\n}');\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      throw gl.getShaderInfoLog(fragmentShader);\n    }\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      throw gl.getProgramInfoLog(program);\n    }\n    gl.useProgram(program);\n    cleanup = function() {\n      gl.deleteShader(fragmentShader);\n      gl.deleteShader(vertexShader);\n      gl.deleteProgram(program);\n      gl.deleteBuffer(buffer);\n      gl.deleteTexture(source);\n      gl.deleteTexture(target);\n      gl.deleteFramebuffer(framebuffer);\n      gl.bindBuffer(gl.ARRAY_BUFFER, null);\n      gl.useProgram(null);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n      return gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    };\n    target = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, target);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, target, 0);\n    sourceCanvas = createSourceCanvas();\n    source = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, source);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, sourceType, sourceCanvas);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    vertices = new Float32Array([1, 1, -1, 1, -1, -1, 1, 1, -1, -1, 1, -1]);\n    buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n    positionLoc = gl.getAttribLocation(program, 'position');\n    sourceLoc = gl.getUniformLocation(program, 'source');\n    gl.enableVertexAttribArray(positionLoc);\n    gl.vertexAttribPointer(positionLoc, 2, gl.FLOAT, false, 0, 0);\n    gl.uniform1i(sourceLoc, 0);\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n    readBuffer = new Uint8Array(4 * 4);\n    gl.readPixels(0, 0, 2, 2, gl.RGBA, gl.UNSIGNED_BYTE, readBuffer);\n    result = Math.abs(readBuffer[0] - 127) < 10;\n    cleanup();\n    return result;\n  };\n  checkTexture = function(gl, targetType) {\n    var target;\n    target = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, target);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, targetType, null);\n    if (gl.getError() === 0) {\n      gl.deleteTexture(target);\n      return true;\n    } else {\n      gl.deleteTexture(target);\n      return false;\n    }\n  };\n  checkColorBuffer = function(gl, targetType) {\n    var check, framebuffer, target;\n    target = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, target);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, targetType, null);\n    framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, target, 0);\n    check = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    gl.deleteTexture(target);\n    gl.deleteFramebuffer(framebuffer);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    if (check === gl.FRAMEBUFFER_COMPLETE) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  shimExtensions = [];\n  shimLookup = {};\n  unshimExtensions = [];\n  checkSupport = function() {\n    var canvas, extobj, gl, halfFloatExt, halfFloatTexturing, singleFloatExt, singleFloatTexturing;\n    canvas = document.createElement('canvas');\n    gl = null;\n    try {\n      gl = canvas.getContext('experimental-webgl');\n      if (gl === null) {\n        gl = canvas.getContext('webgl');\n      }\n    } catch (_error) {}\n    if (gl != null) {\n      singleFloatExt = gl.getExtension('OES_texture_float');\n      if (singleFloatExt === null) {\n        if (checkTexture(gl, gl.FLOAT)) {\n          singleFloatTexturing = true;\n          shimExtensions.push('OES_texture_float');\n          shimLookup.OES_texture_float = {\n            shim: true\n          };\n        } else {\n          singleFloatTexturing = false;\n          unshimExtensions.push('OES_texture_float');\n        }\n      } else {\n        if (checkTexture(gl, gl.FLOAT)) {\n          singleFloatTexturing = true;\n          shimExtensions.push('OES_texture_float');\n        } else {\n          singleFloatTexturing = false;\n          unshimExtensions.push('OES_texture_float');\n        }\n      }\n      if (singleFloatTexturing) {\n        extobj = gl.getExtension('WEBGL_color_buffer_float');\n        if (extobj === null) {\n          if (checkColorBuffer(gl, gl.FLOAT)) {\n            shimExtensions.push('WEBGL_color_buffer_float');\n            shimLookup.WEBGL_color_buffer_float = {\n              shim: true,\n              RGBA32F_EXT: 0x8814,\n              RGB32F_EXT: 0x8815,\n              FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT: 0x8211,\n              UNSIGNED_NORMALIZED_EXT: 0x8C17\n            };\n          } else {\n            unshimExtensions.push('WEBGL_color_buffer_float');\n          }\n        } else {\n          if (checkColorBuffer(gl, gl.FLOAT)) {\n            shimExtensions.push('WEBGL_color_buffer_float');\n          } else {\n            unshimExtensions.push('WEBGL_color_buffer_float');\n          }\n        }\n        extobj = gl.getExtension('OES_texture_float_linear');\n        if (extobj === null) {\n          if (checkFloatLinear(gl, gl.FLOAT)) {\n            shimExtensions.push('OES_texture_float_linear');\n            shimLookup.OES_texture_float_linear = {\n              shim: true\n            };\n          } else {\n            unshimExtensions.push('OES_texture_float_linear');\n          }\n        } else {\n          if (checkFloatLinear(gl, gl.FLOAT)) {\n            shimExtensions.push('OES_texture_float_linear');\n          } else {\n            unshimExtensions.push('OES_texture_float_linear');\n          }\n        }\n      }\n      halfFloatExt = gl.getExtension('OES_texture_half_float');\n      if (halfFloatExt === null) {\n        if (checkTexture(gl, 0x8D61)) {\n          halfFloatTexturing = true;\n          shimExtensions.push('OES_texture_half_float');\n          halfFloatExt = shimLookup.OES_texture_half_float = {\n            HALF_FLOAT_OES: 0x8D61,\n            shim: true\n          };\n        } else {\n          halfFloatTexturing = false;\n          unshimExtensions.push('OES_texture_half_float');\n        }\n      } else {\n        if (checkTexture(gl, halfFloatExt.HALF_FLOAT_OES)) {\n          halfFloatTexturing = true;\n          shimExtensions.push('OES_texture_half_float');\n        } else {\n          halfFloatTexturing = false;\n          unshimExtensions.push('OES_texture_half_float');\n        }\n      }\n      if (halfFloatTexturing) {\n        extobj = gl.getExtension('EXT_color_buffer_half_float');\n        if (extobj === null) {\n          if (checkColorBuffer(gl, halfFloatExt.HALF_FLOAT_OES)) {\n            shimExtensions.push('EXT_color_buffer_half_float');\n            shimLookup.EXT_color_buffer_half_float = {\n              shim: true,\n              RGBA16F_EXT: 0x881A,\n              RGB16F_EXT: 0x881B,\n              FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT: 0x8211,\n              UNSIGNED_NORMALIZED_EXT: 0x8C17\n            };\n          } else {\n            unshimExtensions.push('EXT_color_buffer_half_float');\n          }\n        } else {\n          if (checkColorBuffer(gl, halfFloatExt.HALF_FLOAT_OES)) {\n            shimExtensions.push('EXT_color_buffer_half_float');\n          } else {\n            unshimExtensions.push('EXT_color_buffer_half_float');\n          }\n        }\n        extobj = gl.getExtension('OES_texture_half_float_linear');\n        if (extobj === null) {\n          if (checkFloatLinear(gl, halfFloatExt.HALF_FLOAT_OES)) {\n            shimExtensions.push('OES_texture_half_float_linear');\n            return shimLookup.OES_texture_half_float_linear = {\n              shim: true\n            };\n          } else {\n            return unshimExtensions.push('OES_texture_half_float_linear');\n          }\n        } else {\n          if (checkFloatLinear(gl, halfFloatExt.HALF_FLOAT_OES)) {\n            return shimExtensions.push('OES_texture_half_float_linear');\n          } else {\n            return unshimExtensions.push('OES_texture_half_float_linear');\n          }\n        }\n      }\n    }\n  };\n  if (window.WebGLRenderingContext != null) {\n    checkSupport();\n    unshimLookup = {};\n    for (_i = 0, _len = unshimExtensions.length; _i < _len; _i++) {\n      name = unshimExtensions[_i];\n      unshimLookup[name] = true;\n    }\n    getExtension = WebGLRenderingContext.prototype.getExtension;\n    WebGLRenderingContext.prototype.getExtension = function(name) {\n      var extobj;\n      extobj = shimLookup[name];\n      if (extobj === void 0) {\n        if (unshimLookup[name]) {\n          return null;\n        } else {\n          return getExtension.call(this, name);\n        }\n      } else {\n        return extobj;\n      }\n    };\n    getSupportedExtensions = WebGLRenderingContext.prototype.getSupportedExtensions;\n    WebGLRenderingContext.prototype.getSupportedExtensions = function() {\n      var extension, result, supported, _j, _k, _len1, _len2;\n      supported = getSupportedExtensions.call(this);\n      result = [];\n      for (_j = 0, _len1 = supported.length; _j < _len1; _j++) {\n        extension = supported[_j];\n        if (unshimLookup[extension] === void 0) {\n          result.push(extension);\n        }\n      }\n      for (_k = 0, _len2 = shimExtensions.length; _k < _len2; _k++) {\n        extension = shimExtensions[_k];\n        if (__indexOf.call(result, extension) < 0) {\n          result.push(extension);\n        }\n      }\n      return result;\n    };\n    return WebGLRenderingContext.prototype.getFloatExtension = function(spec) {\n      var candidate, candidates, half, halfFramebuffer, halfLinear, halfTexture, i, importance, preference, result, single, singleFramebuffer, singleLinear, singleTexture, use, _j, _k, _l, _len1, _len2, _len3, _len4, _m, _ref, _ref1, _ref2;\n      if (spec.prefer == null) {\n        spec.prefer = ['half'];\n      }\n      if (spec.require == null) {\n        spec.require = [];\n      }\n      if (spec.throws == null) {\n        spec.throws = true;\n      }\n      singleTexture = this.getExtension('OES_texture_float');\n      halfTexture = this.getExtension('OES_texture_half_float');\n      singleFramebuffer = this.getExtension('WEBGL_color_buffer_float');\n      halfFramebuffer = this.getExtension('EXT_color_buffer_half_float');\n      singleLinear = this.getExtension('OES_texture_float_linear');\n      halfLinear = this.getExtension('OES_texture_half_float_linear');\n      single = {\n        texture: singleTexture !== null,\n        filterable: singleLinear !== null,\n        renderable: singleFramebuffer !== null,\n        score: 0,\n        precision: 'single',\n        half: false,\n        single: true,\n        type: this.FLOAT\n      };\n      half = {\n        texture: halfTexture !== null,\n        filterable: halfLinear !== null,\n        renderable: halfFramebuffer !== null,\n        score: 0,\n        precision: 'half',\n        half: true,\n        single: false,\n        type: (_ref = halfTexture != null ? halfTexture.HALF_FLOAT_OES : void 0) != null ? _ref : null\n      };\n      candidates = [];\n      if (single.texture) {\n        candidates.push(single);\n      }\n      if (half.texture) {\n        candidates.push(half);\n      }\n      result = [];\n      for (_j = 0, _len1 = candidates.length; _j < _len1; _j++) {\n        candidate = candidates[_j];\n        use = true;\n        _ref1 = spec.require;\n        for (_k = 0, _len2 = _ref1.length; _k < _len2; _k++) {\n          name = _ref1[_k];\n          if (candidate[name] === false) {\n            use = false;\n          }\n        }\n        if (use) {\n          result.push(candidate);\n        }\n      }\n      for (_l = 0, _len3 = result.length; _l < _len3; _l++) {\n        candidate = result[_l];\n        _ref2 = spec.prefer;\n        for (i = _m = 0, _len4 = _ref2.length; _m < _len4; i = ++_m) {\n          preference = _ref2[i];\n          importance = Math.pow(2, spec.prefer.length - i - 1);\n          if (candidate[preference]) {\n            candidate.score += importance;\n          }\n        }\n      }\n      result.sort(function sort(a, b) {\n        if (a.score === b.score) {\n          return 0;\n        } else if (a.score < b.score) {\n          return 1;\n        } else if (a.score > b.score) {\n          return -1;\n        }\n      });\n      if (result.length === 0) {\n        if (spec.throws) {\n          throw 'No floating point texture support that is ' +\n            spec.require.join(', ');\n        } else {\n          return null;\n        }\n      } else {\n        result = result[0];\n        return {\n          filterable: result.filterable,\n          renderable: result.renderable,\n          type: result.type,\n          precision: result.precision\n        };\n      }\n    };\n  }\n}\n\nnukeVendorPrefix();\ntextureFloatShims();\n\nmodule.exports = WebGLHeatmap;\n"]},"metadata":{},"sourceType":"script"}